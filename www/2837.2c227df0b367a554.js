"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2837],{2837:(J,d,c)=>{c.r(d),c.d(d,{ActivityOverviewPageModule:()=>N});var r=c(6895),f=c(4006),u=c(9267),_=c(8996),i=c(4650),A=c(410);function D(e,o){if(1&e){const n=i.EpF();i.TgZ(0,"ion-col",44)(1,"div",45),i.NdJ("click",function(){i.CHM(n);const a=i.oxw();return i.KtG(a.editActivity())}),i._UZ(2,"img",46),i.qZA(),i.TgZ(3,"ion-col")(4,"ion-label",47),i._uU(5,"Edit"),i.qZA()()()}}function h(e,o){if(1&e){const n=i.EpF();i.TgZ(0,"ion-text",48),i.NdJ("click",function(){i.CHM(n);const a=i.oxw();return i.KtG(a.invitesView())}),i._uU(1),i._UZ(2,"br"),i._uU(3,"invites recieved"),i._UZ(4,"br"),i._uU(5),i.qZA()}if(2&e){const n=i.oxw();i.xp6(1),i.hij("0",(null==n.activityData?null:n.activityData.inviteCount)||0,""),i.xp6(4),i.AsE("0",(null==n.activityData?null:n.activityData.accepted)||0,"/0",(null==n.activityData?null:n.activityData.inviteCount)||0," Accepted")}}function m(e,o){if(1&e){const n=i.EpF();i.TgZ(0,"ion-icon",49),i.NdJ("click",function(){i.CHM(n);const a=i.oxw();return i.KtG(a.updateData("favorite",!0))}),i.qZA()}}function Z(e,o){if(1&e){const n=i.EpF();i.TgZ(0,"ion-icon",50),i.NdJ("click",function(){i.CHM(n);const a=i.oxw();return i.KtG(a.updateData("favorite",!1))}),i.qZA()}}function w(e,o){1&e&&(i.TgZ(0,"ion-button",55),i._uU(1,"invite accepted"),i.qZA())}function x(e,o){if(1&e){const n=i.EpF();i.TgZ(0,"ion-button",56),i.NdJ("click",function(){i.CHM(n);const a=i.oxw(2);return i.KtG(a.updateData("cancel",!(null!=a.activityData&&null!=a.activityData.userActions&&a.activityData.userActions.inviteSent)))}),i._uU(1,"Cancel Invite"),i.qZA()}}function b(e,o){if(1&e){const n=i.EpF();i.TgZ(0,"ion-button",56),i.NdJ("click",function(){i.CHM(n);const a=i.oxw(2);return i.KtG(a.updateData("join",!(null!=a.activityData&&null!=a.activityData.userActions&&a.activityData.userActions.inviteSent)))}),i._uU(1,"Join Now"),i.qZA()}}function T(e,o){1&e&&(i.TgZ(0,"ion-button",55),i._uU(1,"Rejected"),i.qZA())}function O(e,o){if(1&e&&(i.TgZ(0,"ion-col",51),i.YNc(1,w,2,0,"ion-button",52),i.YNc(2,x,2,0,"ion-button",53),i.YNc(3,b,2,0,"ion-button",53),i.YNc(4,T,2,0,"ion-button",54),i.qZA()),2&e){const n=i.oxw();i.xp6(1),i.Q6J("ngIf",null==n.activityData||null==n.activityData.userActions?null:n.activityData.userActions.joined),i.xp6(1),i.Q6J("ngIf",(null==n.activityData||null==n.activityData.userActions?null:n.activityData.userActions.inviteSent)&&!(null!=n.activityData&&null!=n.activityData.userActions&&n.activityData.userActions.joined)&&!(null!=n.activityData&&null!=n.activityData.userActions&&n.activityData.userActions.cancelledByMaster)),i.xp6(1),i.Q6J("ngIf",!(null!=n.activityData&&null!=n.activityData.userActions&&n.activityData.userActions.inviteSent)),i.xp6(1),i.Q6J("ngIf",null==n.activityData||null==n.activityData.userActions?null:n.activityData.userActions.cancelledByMaster)}}function U(e,o){if(1&e){const n=i.EpF();i.TgZ(0,"ion-col",57)(1,"ion-button",56),i.NdJ("click",function(){i.CHM(n);const a=i.oxw();return i.KtG(a.updateData("cancel",!0))}),i._uU(2,"Cancel Activity"),i.qZA()()}}function P(e,o){if(1&e&&(i.TgZ(0,"ion-row")(1,"ion-col",21),i._UZ(2,"ion-icon",30),i.TgZ(3,"ion-text",23)(4,"span",31),i._uU(5," End Time: "),i.qZA(),i._uU(6),i.ALo(7,"date"),i.qZA()()()),2&e){const n=i.oxw();i.xp6(6),i.Oqu(i.xi3(7,1,null==n.activityData?null:n.activityData.endDate,"d MMMM EEE h:mm a"))}}function q(e,o){if(1&e&&(i.TgZ(0,"div",58)(1,"ion-content")(2,"ion-text"),i._uU(3),i.qZA()()()),2&e){const n=i.oxw();i.xp6(3),i.Oqu(null==n.activityData?null:n.activityData.description)}}function I(e,o){if(1&e&&i._UZ(0,"img",59),2&e){const n=i.oxw();i.Q6J("src",n.profilePic,i.LSH)}}function C(e,o){if(1&e&&(i.TgZ(0,"ion-col",60)(1,"a",61),i._UZ(2,"ion-icon",62),i.TgZ(3,"ion-label"),i._uU(4,"Call"),i.qZA()()()),2&e){const n=i.oxw();i.xp6(1),i.Q6J("href","tel:"+(null==n.activityData||null==n.activityData.activityCreatedBy?null:n.activityData.activityCreatedBy.mobile),i.LSH)}}const k=[{path:"",component:(()=>{class e{constructor(n,t,a){this.route=n,this.auth=t,this.location=a}ngOnInit(){}ionViewWillEnter(){this.id=this.route.url.split("/")[2],this.auth.getAcivityInfo({activityId:this.id}).subscribe(n=>{var t,a,l;this.activityData=n.data[0],null!==(a=null===(t=this.activityData)||void 0===t?void 0:t.activityCreatedBy)&&void 0!==a&&a.gridfsId?this.getProfileImage(this.activityData.activityCreatedBy.gridfsId):this.profilePic=null===(l=this.activityData.activityCreatedBy)||void 0===l?void 0:l.imageUrl},n=>{console.log(n,8786)})}editActivity(){this.auth.sendActivityData(this.activityData),this.route.navigate(["/editActivity/"+this.id])}getProfileImage(n){this.auth.getImage({gridfsId:n}).subscribe(t=>{t.success&&(this.profilePic=atob(t.data.data))})}getSentence(){var n,t,a;return null!==(n=this.activityData)&&void 0!==n&&n.isVisitor?null!==(a=null===(t=this.activityData)||void 0===t?void 0:t.userActions)&&void 0!==a&&a.joined?"Cancel Invite":"JOIN NOW":"Cancel Activity"}updateData(n,t){var a;null!==(a=this.activityData)&&void 0!==a&&a.isVisitor||"favorite"==n?this.auth.updateVisData({key:n,value:t,activityId:this.id}).subscribe(l=>{this.activityData=l.data[0]},l=>{console.log(l)}):this.auth.deleteActivity({id:this.id}).subscribe(l=>{l.success&&this.route.navigate(["/tabs/tab1"])},l=>{console.log(l)})}closeTab(){this.auth.updateInitiation(),this.route.navigateByUrl("/tabs/tab1")}getLastSeen(n){if(null!=n&&n.lastSeen){let t=(new Date).getDate()-new Date(n.lastSeen).getDate();return t>0?"seen "+t+" day back":"seen today"}return"not seen yet"}getProfileOverview(){var n,t;this.route.navigateByUrl("profile-overview/"+(null===(t=null===(n=this.activityData)||void 0===n?void 0:n.activityCreatedBy)||void 0===t?void 0:t._id))}invitesView(){this.route.navigate(["/invites/"+this.id])}navigateTo(){window.open(`https://www.google.com/maps/search/?api=1&query=${this.activityData.latitude},${this.activityData.longitude}&query_place_id=${this.activityData.placeId}`,"_blank")}ionViewWillLeave(){this.auth.updateInitiation()}shareLink(){var n,t,a,l;if(navigator.share){const y=null===(n=this.activityData)||void 0===n?void 0:n.startDate,p=null===(a=null===(t=this.activityData)||void 0===t?void 0:t.location)||void 0===a?void 0:a.description,v=null===(l=this.activityData)||void 0===l?void 0:l.description;let s="Activity Details\n";v&&(s+=v.length>70?`${v.substring(0,70)}...\n`:`${v}\n`),y&&(s+=`START DATE: ${new Date(y).toLocaleString("en-US",{day:"numeric",month:"long",weekday:"short",hour:"numeric",minute:"numeric",hour12:!0})}\n`),p&&(s+=`LOCATION: ${p}\n`),navigator.share({text:s,url:location.href}).then(()=>console.log("Successful share")).catch(g=>console.log("Error sharing:",g))}else console.log("Web Share API not supported.")}}return e.\u0275fac=function(n){return new(n||e)(i.Y36(_.F0),i.Y36(A.u),i.Y36(r.Ye))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-activity-overview"]],decls:99,vars:28,consts:[[2,"padding","15px","height","100%"],[2,"margin-bottom","10px"],["size","5",2,"padding-bottom","0px"],[1,"heading"],[1,"sub_heading"],["size","1.5",4,"ngIf"],["size","4",2,"text-align","center"],["class","sub_heading",3,"click",4,"ngIf"],["size","1.5",2,"text-align","end"],["name","close-circle-outline",1,"svg_size",3,"click"],["size","2.5"],[1,"center_align"],["name","star-outline","class","svg_size",3,"click",4,"ngIf"],["name","star","class","svg_size",3,"click",4,"ngIf"],[2,"font-size","12px"],["name","alert-circle-outline",1,"svg_size"],["size","2.5",3,"click"],["name","share-social-outline",1,"svg_size"],["size","4.5","class","col_center_align align_end",4,"ngIf"],["size","4.5","class","col_center_align",4,"ngIf"],[2,"display","grid","align-items","center","margin-top","20px"],[1,"col_center_align"],[2,"height","20px","width","32px","padding-right","10px",3,"alt","src"],[2,"padding-left","5px"],[1,"col_center_align",2,"display","flex","flex-direction","row","justify-content","end"],["size","8",2,"display","flex"],["name","location-outline",2,"height","20px","width","20px"],["size","4",1,"col_center_align",2,"display","flex","flex-direction","row","justify-content","end"],[2,"margin-right","0px",3,"click"],[2,"display","grid","align-items","center","margin-top","10px"],["name","calendar-outline",2,"height","20px","width","20px"],[2,"font-weight","600"],[4,"ngIf"],["style","height: 12%; margin: 15px 0px; padding: 10px; border: solid 1px; border-radius: 10px;",4,"ngIf"],[2,"padding-bottom","0px"],[2,"border-bottom","none !important","width","100%"],[1,"round","round_new","center_align"],["alt","user",3,"src",4,"ngIf"],[2,"margin","30px 0px"],["name","male-outline",2,"height","20px","width","20px"],[1,"sub_heading",2,"padding-left","10px"],[1,"center_align_icon_text",3,"click"],["name","person-circle-outline",1,"svg_size"],["class","center_align_icon_text",4,"ngIf"],["size","1.5"],[1,"center_align",2,"height","28px","width","28px","cursor","pointer",3,"click"],["src","../../assets/edit-img.png","alt",""],[2,"font-size","12px","font-weight","bold"],[1,"sub_heading",3,"click"],["name","star-outline",1,"svg_size",3,"click"],["name","star",1,"svg_size",3,"click"],["size","4.5",1,"col_center_align","align_end"],["class","responsive-button ",4,"ngIf"],["class","responsive-button",3,"click",4,"ngIf"],["class","responsive-button",4,"ngIf"],[1,"responsive-button"],[1,"responsive-button",3,"click"],["size","4.5",1,"col_center_align"],[2,"height","12%","margin","15px 0px","padding","10px","border","solid 1px","border-radius","10px"],["alt","user",3,"src"],[1,"center_align_icon_text"],[2,"color","black","text-decoration","none","display","contents",3,"href"],["name","mic-circle-outline",1,"svg_size"]],template:function(n,t){1&n&&(i.TgZ(0,"ion-content")(1,"div",0)(2,"ion-row",1)(3,"ion-col",2)(4,"ion-text",3),i._uU(5,"Activity ID 112"),i.qZA(),i._UZ(6,"br"),i.TgZ(7,"ion-text",4),i._uU(8,"Published on"),i._UZ(9,"br"),i._uU(10),i.ALo(11,"date"),i._UZ(12,"br"),i._uU(13),i.qZA()(),i.YNc(14,D,6,0,"ion-col",5),i.TgZ(15,"ion-col",6),i.YNc(16,h,6,3,"ion-text",7),i.qZA(),i.TgZ(17,"ion-col",8)(18,"ion-icon",9),i.NdJ("click",function(){return t.closeTab()}),i.qZA()()(),i.TgZ(19,"ion-row")(20,"ion-col",10)(21,"div",11),i.YNc(22,m,1,0,"ion-icon",12),i.YNc(23,Z,1,0,"ion-icon",13),i.qZA(),i.TgZ(24,"ion-col",11)(25,"ion-label",14),i._uU(26,"Favourate"),i.qZA()()(),i.TgZ(27,"ion-col",10)(28,"div",11),i._UZ(29,"ion-icon",15),i.qZA(),i.TgZ(30,"ion-col",11)(31,"ion-label",14),i._uU(32,"Report"),i.qZA()()(),i.TgZ(33,"ion-col",16),i.NdJ("click",function(){return t.shareLink()}),i.TgZ(34,"div",11),i._UZ(35,"ion-icon",17),i.qZA(),i.TgZ(36,"ion-col",11)(37,"ion-label",14),i._uU(38,"Share"),i.qZA()()(),i.YNc(39,O,5,4,"ion-col",18),i.YNc(40,U,3,0,"ion-col",19),i.qZA(),i.TgZ(41,"div",20)(42,"ion-row")(43,"ion-col",21),i._UZ(44,"img",22),i.TgZ(45,"ion-text",23),i._uU(46),i.qZA()(),i.TgZ(47,"ion-col",24)(48,"ion-text",23),i._uU(49),i.qZA()()()(),i.TgZ(50,"div",20)(51,"ion-row")(52,"ion-col",25),i._UZ(53,"ion-icon",26),i.TgZ(54,"ion-text",23),i._uU(55),i.qZA()(),i.TgZ(56,"ion-col",27)(57,"ion-button",28),i.NdJ("click",function(){return t.navigateTo()}),i._uU(58,"Directions"),i.qZA()()()(),i.TgZ(59,"div",29)(60,"ion-row")(61,"ion-col",21),i._UZ(62,"ion-icon",30),i.TgZ(63,"ion-text",23)(64,"span",31),i._uU(65," Start Time: "),i.qZA(),i._uU(66),i.ALo(67,"date"),i.qZA()()(),i.YNc(68,P,8,4,"ion-row",32),i.qZA(),i.YNc(69,q,4,1,"div",33),i.TgZ(70,"ion-row")(71,"ion-col",34)(72,"ion-text",3),i._uU(73,"Activity created by"),i.qZA()()(),i.TgZ(74,"ion-row",35)(75,"div",36),i.YNc(76,I,1,1,"img",37),i.qZA(),i.TgZ(77,"ion-col",38)(78,"ion-label"),i._uU(79),i.qZA(),i._UZ(80,"br"),i.TgZ(81,"ion-label"),i._uU(82),i.qZA(),i._UZ(83,"br"),i.TgZ(84,"ion-label")(85,"ion-row")(86,"ion-label",21),i._UZ(87,"ion-icon",39),i.qZA(),i.TgZ(88,"ion-col")(89,"ion-text",4),i._uU(90),i.qZA(),i.TgZ(91,"ion-text",40),i._uU(92),i.qZA()()()()()(),i.TgZ(93,"ion-row")(94,"ion-col",41),i.NdJ("click",function(){return t.getProfileOverview()}),i._UZ(95,"ion-icon",42),i.TgZ(96,"ion-label"),i._uU(97,"View Profile"),i.qZA()(),i.YNc(98,C,5,1,"ion-col",43),i.qZA()()()),2&n&&(i.xp6(10),i.hij(" ",i.xi3(11,22,null==t.activityData?null:t.activityData.dateTime,"d MMMM y h:mm a"),""),i.xp6(3),i.Oqu(t.getLastSeen(null==t.activityData?null:t.activityData.userActions)),i.xp6(1),i.Q6J("ngIf",!(null!=t.activityData&&null!=t.activityData.userActions&&t.activityData.userActions.isVisitor)),i.xp6(2),i.Q6J("ngIf",!(null!=t.activityData&&t.activityData.isVisitor)),i.xp6(6),i.Q6J("ngIf",!(null!=t.activityData&&null!=t.activityData.userActions&&t.activityData.userActions.favorite)),i.xp6(1),i.Q6J("ngIf",null==t.activityData||null==t.activityData.userActions?null:t.activityData.userActions.favorite),i.xp6(16),i.Q6J("ngIf",null==t.activityData||null==t.activityData.userActions?null:t.activityData.userActions.isVisitor),i.xp6(1),i.Q6J("ngIf",!(null!=t.activityData&&null!=t.activityData.userActions&&t.activityData.userActions.isVisitor)),i.xp6(4),i.Q6J("alt",null==t.activityData?null:t.activityData.activityName)("src","../../assets/"+(null==t.activityData?null:t.activityData.activityName)+".png",i.LSH),i.xp6(2),i.Oqu(null==t.activityData?null:t.activityData.activityName),i.xp6(3),i.hij("",null==t.activityData?null:t.activityData.views," views"),i.xp6(6),i.Oqu(null==t.activityData||null==t.activityData.location?null:t.activityData.location.description),i.xp6(11),i.Oqu(i.xi3(67,25,null==t.activityData?null:t.activityData.startDate,"d MMMM EEE h:mm a")),i.xp6(2),i.Q6J("ngIf",""!=(null==t.activityData?null:t.activityData.endDate)),i.xp6(1),i.Q6J("ngIf",""!=(null==t.activityData?null:t.activityData.description)),i.xp6(7),i.Q6J("ngIf",t.profilePic),i.xp6(3),i.Oqu(null==t.activityData||null==t.activityData.activityCreatedBy?null:t.activityData.activityCreatedBy.name),i.xp6(3),i.Oqu(null==t.activityData||null==t.activityData.activityCreatedBy?null:t.activityData.activityCreatedBy.city),i.xp6(8),i.Oqu(null==t.activityData||null==t.activityData.activityCreatedBy?null:t.activityData.activityCreatedBy.gender),i.xp6(2),i.Oqu(null==t.activityData||null==t.activityData.activityCreatedBy?null:t.activityData.activityCreatedBy.age),i.xp6(6),i.Q6J("ngIf",null==t.activityData||null==t.activityData.activityCreatedBy?null:t.activityData.activityCreatedBy.showMobile))},dependencies:[r.O5,u.YG,u.wI,u.W2,u.gu,u.Q$,u.Nd,u.yW,r.uU],styles:["ion-button[_ngcontent-%COMP%]{height:45px;text-align:left}.round_new[_ngcontent-%COMP%]{max-width:100px;height:100px}.center_align_icon_text[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}img[_ngcontent-%COMP%]{border-radius:50%}.responsive-button[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.align_end[_ngcontent-%COMP%]{align-items:start;justify-content:end}"]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[_.Bz.forChild(k),_.Bz]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[r.ez,f.u5,u.Pc,M]}),e})()}}]);